<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto PNL Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #242424;
            padding: 50px 0;
            text-align: center;
        }
        header {
            color: #FFFFFF;
            font-size: 34px;
            margin-bottom: 30px;
            font-weight: bold;
        }
        .calculator {
            background-color: #000000;
            display: inline-block;
            padding: 40px 50px;
            border-radius: 12px;
            max-width: 450px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        label {
            display: block;
            text-align: left;
            margin-bottom: 10px;
            font-size: 18px;
            color: #FFFFFF;
            font-weight: bold;
            width: 100%;
        }
        select, input[type="number"] {
            width: 100%;
            padding: 14px;
            font-size: 18px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        button {
            width: 100%;
            padding: 16px;
            background-color: #EE7E19;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 25px;
            border-radius: 8px;
            margin-top: 20px;
            font-weight: bold;
        }
        footer {
            margin-top: 50px;
            font-size: 18px;
            color: #888;
            font-weight: bold;
        }
        .result {
            color: #FFFFFF;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        Crypto PNL Calculator
    </header>
    
    <div class="calculator">
        <label for="buyPrice">Buy Price ($)</label>
        <input type="number" id="buyPrice" placeholder="Enter buy price">

        <label for="sellPrice">Sell Price ($)</label>
        <input type="number" id="sellPrice" placeholder="Enter sell price">

        <label for="investmentAmount">Investment Amount ($)</label>
        <input type="number" id="investmentAmount" placeholder="Enter investment amount">

        <label for="buyingFeeSelect">Buying Fee</label>
        <select id="buyingFeeSelect" style="width: 100%;" onchange="updateInputValue('buyingFee', this.value)">
            <option value="0.01">0.01%</option>
            <option value="0.05">0.05%</option>
            <option value="1">1%</option>
            <option value="custom">Custom...</option>
        </select>
        <input type="number" id="buyingFee" placeholder="Enter or select fee" style="display:none;">

        <label for="sellingFeeSelect">Selling Fee</label>
        <select id="sellingFeeSelect" style="width: 100%;" onchange="updateInputValue('sellingFee', this.value)">
            <option value="0.01">0.01%</option>
            <option value="0.05">0.05%</option>
            <option value="1">1%</option>
            <option value="custom">Custom...</option>
        </select>
        <input type="number" id="sellingFee" placeholder="Enter or select fee" style="display:none;">

        <button onclick="calculateProfitLoss()">Calculate</button>
        <p id="result" class="result"></p>
        <button onclick="sharePNL()">Share My PNL</button>
    </div>

    <footer>
        Â© 2023 Crypto PNL Calculator. All rights reserved.
    </footer>

    <script>
        function calculateProfitLoss() {
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const sellPrice = parseFloat(document.getElementById('sellPrice').value);
            const investmentAmount = parseFloat(document.getElementById('investmentAmount').value);
    
            let buyingFee = parseFloat(document.getElementById('buyingFee').value);
            if (isNaN(buyingFee)) {
                buyingFee = parseFloat(document.getElementById('buyingFeeSelect').value);
            }
    
            let sellingFee = parseFloat(document.getElementById('sellingFee').value);
            if (isNaN(sellingFee)) {
                sellingFee = parseFloat(document.getElementById('sellingFeeSelect').value);
            }
    
                buyingFee = buyingFee / 100;
                sellingFee = sellingFee / 100;

            const totalBuyingFee = investmentAmount * buyingFee;
            const profitLoss = (investmentAmount / buyPrice) * (sellPrice - buyPrice) - totalBuyingFee - (investmentAmount / buyPrice) * sellPrice * sellingFee;

            const resultElement = document.getElementById('result');
                resultElement.innerText = `Profit/Loss: $${profitLoss.toFixed(2)}`;
    
            if (profitLoss < 0) {
                resultElement.style.color = 'blue';
            } else if (profitLoss > 0) {
                resultElement.style.color = 'red';
            } else {
                resultElement.style.color = '#FFFFFF';
            }
        }
       

        function updateInputValue(inputId, value) {
            const inputElement = document.getElementById(inputId);
            if (value === "custom") {
                inputElement.style.display = "block";
            } else {
                inputElement.style.display = "none";
                inputElement.value = value;
            }
        }

        function sharePNL() {
            const result = document.getElementById('result').innerText;
            if (navigator.share) {
                navigator.share({
                    title: 'Crypto PNL Calculator',
                    text: result,
                    url: window.location.href,
                })
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing', error));
            } else {
                alert('Sharing not supported on this browser.');
            }
        }

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const sharedResult = urlParams.get('result');
            if (sharedResult) {
                document.getElementById('result').innerText = sharedResult;

                const profitLossValue = parseFloat(sharedResult.split('$')[1]);
                const resultElement = document.getElementById('result');
        
                if (profitLossValue < 0) {
                    resultElement.style.color = 'blue';
                } else if (profitLossValue > 0) {
                    resultElement.style.color = 'red';
                } else {
                    resultElement.style.color = '#FFFFFF';
                }
            }
        };
    </script>
</body>
</html>
