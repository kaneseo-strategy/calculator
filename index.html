<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto PNL Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #242424;
            padding: 50px 0;
            text-align: center;
        }
        header {
            color: #FFFFFF;
            font-size: 34px;
            margin-bottom: 30px;
            font-weight: bold;
        }
        .calculator {
            background-color: #000000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px 30px;
            border-radius: 12px;
            max-width: 450px;
            box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
            margin: 0 auto; 
        }
        label, select, input[type="number"] {
            box-sizing: border-box; /* 이 부분을 추가합니다. */
        }
        label {
            display: block;
            text-align: left;
            margin-bottom: 10px;
            font-size: 18px;
            color: #FFFFFF;
            font-weight: bold;
            width: 100%;
        }
        select, input[type="number"] {
            width: 100%;
            padding: 14px;
            font-size: 18px;
            margin-bottom: 25px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
        select#sellingFeeSelect, input#sellingFee {
            margin-bottom: 40px; /* 원하는 간격 값으로 조정하세요. */
        }
        button {
            width: 100%;
            padding: 16px;
            background-color: #EE7E19;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 22px;
            border-radius: 8px;
            margin-top: 5px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        footer {
            margin-top: 50px;
            font-size: 18px;
            color: #888;
            font-weight: bold;
        }
        button:focus, input:focus, select:focus {
            outline: 2px solid #EE7E19; /* 예시 색상 */
        }
        .result {
            color: #FFFFFF;
            font-size: 22px;
            font-weight: bold;
            margin-top: 5px;
            margin-bottom: 5px;
        }
        
        @media (min-width: 481px) and (max-width: 768px) {
        .calculator {
            padding: 30px 40px;
            }
        }

        /* 데스크톱 장치 */
        @media (min-width: 769px) {
        .calculator {
            padding: 40px 50px;
            }
        }
        .tab-button {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #242424;
            color: white;
            border: none;
            border-bottom: 2px solid transparent;
        }

        .tab-button.active {
            border-bottom: 2px solid #EE7E19;
        }

        .content {
            display: none;
        }

        .content.active {
            display: block;
        }
    </style>
</head>
<body>
    <header>
        Crypto PNL Calculator
    </header>

    <div class="tabs">
    <button class="tab-button active" onclick="showTab('future', event)">Future Calculator</button>
    <button class="tab-button" onclick="showTab('spot', event)">Spot Calculator</button>

    </div>

    <div class="tab-content">
    <div id="leverage" class="content active"> 
    <label for="positionType">Position Type:</label>
    <select id="positionType">
        <option value="long">Long</option>
        <option value="short">Short</option>
    </select>

    <label for="leverageAmount">Leverage (e.g., 10 for 10x):</label>
    <input type="number" id="leverageAmount" placeholder="Enter leverage">

    <label for="investmentLeverage">Investment Amount ($):</label>
    <input type="number" id="investmentLeverage" placeholder="Enter investment amount">

    <label for="entryPrice">Entry Price ($):</label>
    <input type="number" id="entryPrice" placeholder="Enter entry price">

    <label for="exitPrice">Exit Price ($):</label>
    <input type="number" id="exitPrice" placeholder="Enter exit price">

    <button onclick="calculateLeverageProfitLoss()">Calculate</button>
    <p id="leverageResultDollar" class="result"></p>
    <p id="leverageResultPercent" class="result"></p>
</div>


    
    <div class="calculator">
        <label for="buyPrice">Buy Price ($)</label>
        <input type="number" id="buyPrice" placeholder="Enter buy price">

        <label for="sellPrice">Sell Price ($)</label>
        <input type="number" id="sellPrice" placeholder="Enter sell price">

        <label for="investmentAmount">Investment Amount ($)</label>
        <input type="number" id="investmentAmount" placeholder="Enter investment amount">

        <label for="buyingFeeSelect">Buying Fee</label>
        <select id="buyingFeeSelect" style="width: 100%;" onchange="updateInputValue('buyingFee', this.value)">
            <option value="0.01">0.01%</option>
            <option value="0.05">0.05%</option>
            <option value="1">1%</option>
            <option value="custom">Custom...</option>
        </select>
        <input type="number" id="buyingFee" placeholder="Enter or select fee" style="display:none;">

        <label for="sellingFeeSelect">Selling Fee</label>
        <select id="sellingFeeSelect" style="width: 100%;" onchange="updateInputValue('sellingFee', this.value)">
            <option value="0.01">0.01%</option>
            <option value="0.05">0.05%</option>
            <option value="1">1%</option>
            <option value="custom">Custom...</option>
        </select>
        <input type="number" id="sellingFee" placeholder="Enter or select fee" style="display:none;">

        <button onclick="calculateProfitLoss()">Calculate</button>
        <p id="result" class="result"></p>
        <button onclick="sharePNL()">Share My PNL</button>
    </div>

    <footer>
        © 2023 Crypto PNL Calculator. All rights reserved.
    </footer>

    <script>
        function calculateProfitLoss() {
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const sellPrice = parseFloat(document.getElementById('sellPrice').value);
            const investmentAmount = parseFloat(document.getElementById('investmentAmount').value);
    
            let buyingFee = parseFloat(document.getElementById('buyingFee').value);
            if (isNaN(buyingFee)) {
                buyingFee = parseFloat(document.getElementById('buyingFeeSelect').value);
            }
    
            let sellingFee = parseFloat(document.getElementById('sellingFee').value);
            if (isNaN(sellingFee)) {
                sellingFee = parseFloat(document.getElementById('sellingFeeSelect').value);
            }
    
                buyingFee = buyingFee / 100;
                sellingFee = sellingFee / 100;

            const totalBuyingFee = investmentAmount * buyingFee;
            const profitLoss = (investmentAmount / buyPrice) * (sellPrice - buyPrice) - totalBuyingFee - (investmentAmount / buyPrice) * sellPrice * sellingFee;

            const resultElement = document.getElementById('result');
                resultElement.innerText = `Profit/Loss: $${profitLoss.toFixed(2)}`;
    
            if (profitLoss < 0) {
                resultElement.style.color = 'blue';
            } else if (profitLoss > 0) {
                resultElement.style.color = 'red';
            } else {
                resultElement.style.color = '#FFFFFF';
            }
        }
       

        function updateInputValue(inputId, value) {
            const inputElement = document.getElementById(inputId);
            if (value === "custom") {
                inputElement.style.display = "block";
            } else {
                inputElement.style.display = "none";
                inputElement.value = value;
            }
        }

        function sharePNL() {
            const result = document.getElementById('result').innerText;
            if (navigator.share) {
                navigator.share({
                    title: 'Crypto PNL Calculator',
                    text: result,
                    url: window.location.href,
                })
                .then(() => console.log('Successful share'))
                .catch((error) => console.log('Error sharing', error));
            } else {
                alert('Sharing not supported on this browser.');
            }
        }

        function showTab(tabName, event) {
            var i, content, buttons;

            content = document.getElementsByClassName("content");
            for (i = 0; i < content.length; i++) {
            content[i].style.display = "none";
            }

            buttons = document.getElementsByClassName("tab-button");
            for (i = 0; i < buttons.length; i++) {
             buttons[i].className = buttons[i].className.replace(" active", "");
            }

            document.getElementById(tabName).style.display = "block";
            event.currentTarget.className += " active";
        }

       function calculateLeverageProfitLoss() {
            const positionType = document.getElementById('positionType').value;
            const leverage = parseFloat(document.getElementById('leverageAmount').value);
            const investment = parseFloat(document.getElementById('investmentLeverage').value);
            const entryPrice = parseFloat(document.getElementById('entryPrice').value);
            const exitPrice = parseFloat(document.getElementById('exitPrice').value);
    
            let profitLossDollar;
            if (positionType === "long") {
                profitLossDollar = (exitPrice - entryPrice) * leverage * investment / entryPrice;
            } else { // short
                profitLossDollar = (entryPrice - exitPrice) * leverage * investment / entryPrice;
            }
    
            const profitLossPercent = (profitLossDollar / investment) * 100;
    
            const resultElementDollar = document.getElementById('leverageResultDollar');
            const resultElementPercent = document.getElementById('leverageResultPercent');
            
            resultElementDollar.innerText = `Profit/Loss ($): ${profitLossDollar.toFixed(2)}`;
            resultElementPercent.innerText = `Profit/Loss (%): ${profitLossPercent.toFixed(2)}`;
        
            if (profitLossDollar < 0) {
                resultElementDollar.style.color = 'blue';
                resultElementPercent.style.color = 'blue';
            } else if (profitLossDollar > 0) {
                resultElementDollar.style.color = 'red';
                resultElementPercent.style.color = 'red';
            } else {
                resultElementDollar.style.color = '#FFFFFF';
                resultElementPercent.style.color = '#FFFFFF';
            }
        }

    

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const sharedResult = urlParams.get('result');
            if (sharedResult) {
                document.getElementById('result').innerText = sharedResult;

                const profitLossValue = parseFloat(sharedResult.split('$')[1]);
                const resultElement = document.getElementById('result');
        
                if (profitLossValue < 0) {
                    resultElement.style.color = 'blue';
                } else if (profitLossValue > 0) {
                    resultElement.style.color = 'red';
                } else {
                    resultElement.style.color = '#FFFFFF';
                }
            }
        };
    </script>
</body>
</html>
